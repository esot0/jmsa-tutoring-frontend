(this.webpackJsonptutoring_frontend=this.webpackJsonptutoring_frontend||[]).push([[0],{231:function(e,t,n){},273:function(e,t){},275:function(e,t){},289:function(e,t){},291:function(e,t){},319:function(e,t){},321:function(e,t){},322:function(e,t){},327:function(e,t){},329:function(e,t){},348:function(e,t){},360:function(e,t){},363:function(e,t){},399:function(e,t,n){},429:function(e,t){},433:function(e,t,n){"use strict";n.r(t),n.d(t,"axios_instance",(function(){return fe}));var s=n(1),a=n(0),c=n.n(a),r=n(23),i=n.n(r),l=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,447)).then((function(t){var n=t.getCLS,s=t.getFID,a=t.getFCP,c=t.getLCP,r=t.getTTFB;n(e),s(e),a(e),c(e),r(e)}))},o=(n(231),n(29)),u=n.n(o),j=n(13),d=n(15),b=n(11),h=n(5),O=n(443),m=n(220),p=n(32),x=n.n(p),f=n(38),g=n.n(f),v=n(71),y=n(442),C=n(48),_=n.n(C),S=function(e){var t=new Date(e);return t.getMonth()+1+"/"+t.getDate()+"/"+t.getFullYear()+" "+k(e)},k=function(e){var t=new Date(e),n=t.getHours()>=12?"PM":"AM";return(t.getHours()>12?t.getHours()-12:t.getHours())+":"+t.getMinutes()+" "+n},N=function(){var e,t=localStorage.getItem("token");if(t){try{e=_.a.verify(t,"/NJIBYUGHBYUHIKNBJBYBTGYIUJNBGFB/")}catch(n){return console.log(n),null}return e}},F=function(e){var t=Object(a.useState)([]),n=Object(h.a)(t,2),c=n[0],r=n[1];Object(a.useEffect)((function(){fe.get("http://127.0.0.1:5000/subjects").then((function(e){r(e.data)}))}),[]);return Object(s.jsx)("div",{className:"center",children:e.checkboxes?Object(s.jsx)("div",{className:"checkboxes subjects",children:c.map((function(t){return Object(s.jsx)(O.a.Check,{type:"checkbox",value:t.subject,label:t.subject,name:"setSubjectsFilter",onChange:e.onCheck},t.subject)}))}):Object(s.jsxs)(y.a,{onSelect:function(t){t==e.subject?e.onSelect(""):e.onSelect(t)},children:[Object(s.jsx)(y.a.Toggle,{variant:"success",className:"subject",children:Object(s.jsxs)("span",{children:[" ",e.subject?e.subject:"Subject"]})}),Object(s.jsx)(y.a.Menu,{children:c.map((function(e){return Object(s.jsx)(y.a.Item,{eventKey:e.subject,children:Object(s.jsx)("span",{children:e.subject})})}))})]})})},D=(n(101),n(99),function(){var e=Object(d.k)(),t=Object(a.useState)(""),n=Object(h.a)(t,2),c=n[0],r=n[1],i=Object(a.useState)(""),l=Object(h.a)(i,2),o=l[0],u=l[1],j=Object(a.useState)(""),p=Object(h.a)(j,2),f=p[0],y=p[1],C=Object(a.useState)(""),_=Object(h.a)(C,2),S=_[0],k=_[1],D=Object(a.useState)([]),L=Object(h.a)(D,2),w=L[0],T=L[1],I=Object(a.useState)({}),M=Object(h.a)(I,2),G=M[0],Y=M[1],P=Object(a.useState)(""),E=Object(h.a)(P,2),B=(E[0],E[1],N());Object(a.useEffect)((function(){B.rls.includes("tutor")&&fe.get("http://127.0.0.1:5000/user/students").then((function(e){return e.data.filter((function(e){return e.username!=B.username}))})).then((function(e){console.log(e),T([].concat(Object(b.a)(w),Object(b.a)(e)))})).catch((function(e){console.log(e)})),B.rls.includes("student")&&fe.get("http://127.0.0.1:5000/user/tutors").then((function(e){return e.data.filter((function(e){return e.username!=B.username}))})).then((function(e){T([].concat(Object(b.a)(w),Object(b.a)(e)))})).catch((function(e){console.log(e)}))}),[]);var U=function(e,t){var n=0==parseInt(t.substring(0,1))?parseInt(t.substring(1,2)):parseInt(t.substring(0,2)),s=t.substring(2);return t=(n>12?n-12:n)+s+" "+(n<12?"AM":"PM"),e.getMonth()+1+"/"+e.getDate()+"/"+e.getFullYear()+" "+t};return Object(s.jsxs)("div",{className:"form-comp",children:[Object(s.jsx)("h1",{children:"Set up a Session"}),Object(s.jsxs)(O.a,{onSubmit:function(t){t.preventDefault();var n={subject:S,date:U(c,o),end_date:U(c,f),other_user:G};fe.post("http://127.0.0.1:5000/user/sessions/new",n,{headers:{"Content-Type":"application/json"}}).then((function(t){e.push("/user/".concat(B.username))})).catch((function(e){console.log(e)}))},children:[Object(s.jsx)(F,{subject:S,onSelect:k}),Object(s.jsxs)(O.a.Group,{controlId:"session_attendee",children:[Object(s.jsx)(O.a.Label,{children:B.rls.includes("tutor")?"Student":"Tutor"}),Object(s.jsx)(v.a,{className:"select center",onChange:function(e){Y(e)},options:w,getOptionLabel:function(e){return e.username},getOptionValue:function(e){return e._id}})]}),Object(s.jsxs)(O.a.Group,{children:[Object(s.jsx)(O.a.Label,{classname:"block-label",children:"Date"}),Object(s.jsx)("div",{children:Object(s.jsx)(x.a,{className:"calendar",disabledDays:{before:new Date},format:"M/D/YYYY",name:"date",id:"date",inputProps:{required:!0},onDayClick:function(e,t){var n=t.selected;r(n?void 0:e)},selectedDays:c})})]}),Object(s.jsxs)("div",{children:[Object(s.jsx)(O.a.Label,{className:"block-label",children:"Start Time: "}),Object(s.jsx)(g.a,{name:"time",id:"time",required:!0,disableClock:!0,onChange:function(e){u(e)},value:o}),Object(s.jsx)(O.a.Label,{className:"block-label",children:"End Time: "}),Object(s.jsx)(g.a,{name:"end_time",id:"end_time",required:!0,disableClock:!0,onChange:function(e){y(e)},value:f})]}),Object(s.jsx)(m.a,{variant:"primary",type:"submit",children:"Submit"})]})]})}),L=n(8),w=n(446),T=function(e){return Object(s.jsxs)(w.a,{className:"card user_card wide_card",children:[Object(s.jsx)(w.a.Img,{variant:"top",src:"holder.js/100px180"}),Object(s.jsxs)(w.a.Body,{children:[Object(s.jsx)(w.a.Title,{children:e.full_name}),Object(s.jsx)(w.a.Text,{children:e.bio.length>=20?Object(s.jsxs)("span",{className:"card-body-text",children:[e.bio.substring(20),"..."]}):Object(s.jsx)("span",{className:"card-body-text",children:e.bio})}),Object(s.jsx)(m.a,{variant:"primary",href:"/user/".concat(e.username),children:"Profile"})]})]})},I=n(41),M=n.n(I),G=n(60),Y=n.n(G),P=n(225),E=n(441),B=n(217),U=n(216),q=function(e){var t,n=Object(a.useState)(!1),c=Object(h.a)(n,2),r=c[0],i=c[1],l=Object(a.useState)({nameFilter:"",emailFilter:"",usernameFilter:"",phoneFilter:"",roleFilter:"",subjectsFilter:[],availabilityFilter:null}),o=Object(h.a)(l,2),u=(o[0],o[1],Object(a.useState)("")),j=Object(h.a)(u,2),d=j[0],p=j[1],f=Object(a.useState)(""),g=Object(h.a)(f,2),v=g[0],y=g[1],C=Object(a.useState)(""),S=Object(h.a)(C,2),k=S[0],N=S[1],D=Object(a.useState)(""),w=Object(h.a)(D,2),T=w[0],I=w[1],M=Object(a.useState)(""),G=Object(h.a)(M,2),Y=G[0],q=G[1],$=Object(a.useState)([]),H=Object(h.a)($,2),A=H[0],R=H[1],J=Object(a.useState)(null),z=Object(h.a)(J,2),K=z[0],V=z[1],Q=function(e){Z[e.target.name](e.target.value)},W=localStorage.getItem("token");if(W)try{t=_.a.verify(W,"/NJIBYUGHBYUHIKNBJBYBTGYIUJNBGFB/")}catch(ee){console.log(ee)}Object(a.useEffect)((function(){var t=e.users.userList.filter((function(e){var t=!0;return t=d?!!e.full_name.toLowerCase().includes(d.toLowerCase())&&t:t,t=v?!!e.email.toLowerCase().includes(v.toLowerCase())&&t:t,t=T?!!e.us_phone_number.startsWith(T)&&t:t,t=0!==A.length?!!(e.tutor_subjects&&A.every((function(t){return e.tutor_subjects.includes(t)}))||e.problem_subjects&&A.every((function(t){return e.problem_subjects.includes(t)})))&&t:t,t=k?!!e.username.toLowerCase().includes(k.toLowerCase())&&t:t,t=Y?!!e.roles.includes(Y)&&t:t,t=K?!!function(e){for(var t=!1,n=0;!t&&n<e.availability.length;){var s=new Date(e.availability[n++].$date);t=K.getDate()==s.getDate()&&K.getFullYear()==s.getFullYear()&&K.getMonth()==s.getMonth()}return t}(e)&&t:t}));e.setUsers(Object(L.a)(Object(L.a)({},e.users),{},{filtered:t,displayed:e.offset+e.perPage>=t.length?t.slice(e.offset,t.length):t.slice(e.offset,e.offset+e.perPage)}))}),[d,v,k,T,Y,A,K]);var X=function(e){e.target.value===Y?(e.target.checked=!1,q("")):q(e.target.value)},Z={setNameFilter:p,setEmailFilter:y,setUsernameFilter:N,setPhoneFilter:I,setRoleFilter:X,setSubjectsFilter:function(e){A.includes(e)?R(A.filter((function(t){return t!=e}))):R([].concat(Object(b.a)(A),[e]))}};return Object(s.jsxs)("div",{className:"filtering",children:[Object(s.jsx)(m.a,{onClick:function(){return i(!r)},"aria-controls":"filter-form","aria-expanded":r,children:"Filter"}),Object(s.jsx)(P.a,{in:r,children:Object(s.jsx)("div",{id:"filter-form",children:Object(s.jsxs)(O.a,{className:"form-comp",children:[Object(s.jsxs)(E.a,{children:[Object(s.jsx)(B.a,{children:Object(s.jsxs)(O.a.Group,{children:[Object(s.jsx)(O.a.Label,{children:"Name"}),Object(s.jsx)(U.a,{className:"search-input",type:"text",name:"setNameFilter",onChange:Q}),t.rls.includes("admin")&&Object(s.jsxs)("div",{children:[Object(s.jsx)(O.a.Label,{children:"Email"}),Object(s.jsx)(U.a,{className:"search-input",type:"text",name:"setEmailFilter",onChange:Q})]})]})}),Object(s.jsxs)(B.a,{children:[Object(s.jsx)(O.a.Label,{children:"Username"}),Object(s.jsx)(U.a,{className:"search-input",type:"text",name:"setUsernameFilter",onChange:Q}),t.rls.includes("admin")&&Object(s.jsxs)("div",{children:[Object(s.jsx)(O.a.Label,{children:"Phone # (Stored in format xxx-xxx-xxxx)"}),Object(s.jsx)(U.a,{className:"search-input",type:"text",name:"setPhoneFilter",onChange:Q})]})]})]}),Object(s.jsx)(E.a,{children:Object(s.jsx)(F,{checkboxes:!0,name:"setSubjectsFilter",onCheck:Q})}),Object(s.jsx)(E.a,{children:Object(s.jsx)(x.a,{className:"calendar",format:"M/D/YYYY",name:"setStartDateFilter",id:"date",onDayChange:function(e,t){var n=t.selected;V(n?void 0:e)},value:K})}),Object(s.jsx)(E.a,{children:Object(s.jsxs)(O.a.Group,{className:"radios",controlId:"role",children:[Object(s.jsx)(O.a.Check,{inline:!0,value:"tutor",name:"setRoleFilter",label:"Tutor",type:"radio",id:"tutor",onClick:X}),Object(s.jsx)(O.a.Check,{inline:!0,value:"student",name:"setRoleFilter",label:"Student",type:"radio",id:"student",onClick:X}),Object(s.jsx)(O.a.Check,{inline:!0,value:"student,tutor",name:"setRoleFilter",label:"Both",type:"radio",id:"both",onClick:X})]})})]})})})]})},$=function(e){var t=N(),n=Object(a.useState)({userList:[],filtered:[],displayed:[]}),c=Object(h.a)(n,2),r=c[0],i=c[1],l=Object(a.useState)(0),o=Object(h.a)(l,2),u=o[0],j=o[1],d=Object(a.useState)(!0),b=Object(h.a)(d,2),m=b[0],p=b[1],x=Object(a.useState)({username:"",fullName:"",subject:"",type:""}),f=Object(h.a)(x,2),g=f[0],v=f[1],y=20,C=Math.ceil(r.userList.length)/y;Object(a.useEffect)((function(){var e=r.userList.filter((function(e){p(!0);var t=e.username.toLowerCase().includes(g.username),n=e.roles.includes("tutor")&&e.tutoring_subjects?e.tutoring_subjects.includes(g.subject):!!e.problem_subjects&&e.problem_subjects.includes(g.subject),s=e.roles.includes(g.type),a=e.full_name.toLowerCase().includes(g.fullName.toLowerCase()),c=!0;return g.username&&(c=c&&t),g.subject&&(c=c&&n),g.fullName&&(c=c&&a),g.type&&(c=c&&s),c}));p(!1),i(Object(L.a)(Object(L.a)({},r),{},{filtered:e,displayed:e.slice(0,y)}))}),[g]),Object(a.useEffect)((function(){t&&t.rls.includes("student")&&t.rls.includes("tutor")||t.rls.includes("admin")?fe.get("http://127.0.0.1:5000/user").then((function(t){return t.data.filter((function(t){return t.username!=e.username}))})).then((function(e){i(Object(L.a)(Object(L.a)({},r),{},{userList:e,filtered:e,displayed:e.slice(0,y)}))})).then((function(){p(!1)})).catch((function(e){console.log(e)})):t&&t.rls.includes("tutor")?fe.get("http://127.0.0.1:5000/user/students").then((function(t){return t.data.filter((function(t){return t.username!=e.username}))})).then((function(e){i(Object(L.a)(Object(L.a)({},r),{},{userList:e,filtered:e,displayed:e.slice(0,y)}))})).then((function(){p(!1)})).catch((function(e){console.log(e)})):t&&t.rls.includes("student")&&fe.get("http://127.0.0.1:5000/user/tutors").then((function(e){return e.data.filter((function(e){return e.username!=t.username}))})).then((function(e){i(Object(L.a)(Object(L.a)({},r),{},{userList:e,filtered:e,displayed:e.slice(0,y)}))})).then((function(){p(!1)})).catch((function(e){console.log(e)}))}),[]);var _=r.displayed.map((function(e){return Object(s.jsx)(T,{className:"user_card",full_name:e.full_name,username:e.username,bio:e.biography},e._id.$oid)})),S=function(e){v(Object(L.a)(Object(L.a)({},g),{},{type:e.target.value}))};return Object(s.jsxs)("div",{children:[Object(s.jsx)("h1",{children:"Users"}),Object(s.jsxs)("div",{children:[Object(s.jsx)(q,{users:r,offset:u,perPage:y,setUsers:i}),t.rls.includes("tutor")&&t.rls.includes("student")?Object(s.jsx)(O.a,{className:"form-comp",children:Object(s.jsxs)(O.a.Group,{controlId:"role",children:[Object(s.jsx)(O.a.Check,{inline:!0,value:"tutor",name:"role",label:"Tutor",type:"radio",id:"tutor",onClick:S}),Object(s.jsx)(O.a.Check,{inline:!0,value:"student",name:"role",label:"Student",type:"radio",id:"student",onClick:S})]})}):null]}),m&&Object(s.jsx)(Y.a,{type:"spin",color:"white",height:"10%",width:"10%",className:"loading_spinner"}),0!=_.length?Object(s.jsx)("div",{className:"userdash",children:_}):Object(s.jsx)("h3",{children:"No matching users found"}),Object(s.jsx)(M.a,{pageCount:C,pageRangeDisplayed:5,marginPagesDisplayed:5,onPageChange:function(e){var t=e.selected;j(Math.ceil(t*y)),i(Object(L.a)(Object(L.a)({},r),{},{displayed:y>=r.filtered.length?r.filtered.slice(u,r.filtered.length):r.filtered.slice(u,u+2)}))},containerClassName:"pagination",subContainerClassName:"pages pagination",activeClassName:"active",previousLabel:"Previous",nextLabel:"Next",breakLabel:"..."})]})};n(399);var H=function(){return Object(s.jsxs)("div",{className:"App",children:[Object(s.jsxs)("header",{className:"header",children:[Object(s.jsx)("img",{src:"/brain.png",alt:"logo"}),Object(s.jsx)("h1",{className:"fade-in",children:"JMSA Tutoring Services"}),Object(s.jsx)("a",{className:"App-link",href:"https://reactjs.org",target:"_blank",rel:"noopener noreferrer"})]}),Object(s.jsxs)("section",{className:"align-odd",children:[Object(s.jsx)("h2",{children:"About Us"}),Object(s.jsx)("p",{children:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. In lacinia justo vitae sapien laoreet suscipit. Cras eu justo vel turpis convallis pretium non ac nibh. Suspendisse nibh ante, luctus sed tellus ac, auctor lacinia orci. Curabitur et elit ac lectus accumsan rhoncus. Etiam faucibus sit amet felis ut eleifend. Phasellus quis rhoncus augue. Sed ac lectus pellentesque, dictum eros eu, blandit sapien. Fusce eget pretium erat, quis accumsan velit. Morbi vel libero a nunc commodo vehicula ac non elit. Quisque placerat et quam vel sagittis. Aenean ac dui vestibulum, sollicitudin ipsum et, pretium nulla. Maecenas eget bibendum purus. Nam faucibus metus nec commodo cursus. Sed vehicula porttitor sem at porta. Fusce sodales id quam sed elementum. Suspendisse vel orci ut eros sagittis rhoncus ac non sem. Proin rutrum laoreet libero, at lacinia ex elementum non. Etiam imperdiet quis mi at blandit."})]})]})},A=function(e){var t=Object(d.k)(),n=Object(a.useState)(""),c=Object(h.a)(n,2),r=c[0],i=c[1];return Object(s.jsxs)("div",{className:"form-comp",children:[Object(s.jsx)("h1",{children:"Log in "}),Object(s.jsxs)(O.a,{onSubmit:function(e){e.preventDefault();var n={username:e.target.username.value,password:e.target.password.value};fe.post("user/sign_in",n,{dataType:"json",xhrFields:{withCredentials:!0},crossDomain:!0,headers:{"Content-Type":"application/json"}}).then((function(e){e.data.access_token&&_.a.verify(e.data.access_token,"/NJIBYUGHBYUHIKNBJBYBTGYIUJNBGFB/",(function(){localStorage.clear(),localStorage.setItem("token",e.data.access_token),t.push("/"),window.location.reload(!0)}))})).catch((function(e){i("Invalid credentials"),console.log("err, ",e)}))},children:[r||"",Object(s.jsxs)(O.a.Group,{controlId:"username",children:[Object(s.jsx)(O.a.Label,{children:"Username"}),Object(s.jsx)(O.a.Control,{type:"text",placeholder:"Username"})]}),Object(s.jsxs)(O.a.Group,{controlId:"password",children:[Object(s.jsx)(O.a.Label,{children:"Password"}),Object(s.jsx)(O.a.Control,{type:"password",placeholder:"Password"})]}),Object(s.jsxs)("span",{children:["Forgot password? Click",Object(s.jsx)("a",{href:"/reset_password",children:" Here"})]}),Object(s.jsx)(m.a,{variant:"primary",type:"submit",children:"Submit"})]})]})},R=n(45),J=n(445),z=n(444),K=function(e){var t=N(),n=Object(a.useState)(t&&t.username),c=Object(h.a)(n,2),r=c[0],i=c[1],l=Object(d.k)();return Object(s.jsxs)(J.a,{className:"navbar",collapseOnSelect:!0,expand:"lg",variant:"dark",children:[Object(s.jsx)(R.LinkContainer,{to:"/",children:Object(s.jsx)(J.a.Brand,{children:"JMSA Tutoring"})}),Object(s.jsx)(J.a.Toggle,{"aria-controls":"responsive-navbar-nav"}),Object(s.jsx)(J.a.Collapse,{id:"responsive-navbar-nav",children:Object(s.jsx)(z.a,{children:r?Object(s.jsxs)("div",{children:[Object(s.jsx)(R.LinkContainer,{style:{display:"inline"},to:"/dashboard",children:Object(s.jsx)(z.a.Link,{style:{display:"inline"},children:" Dashboard"})}),Object(s.jsx)(R.LinkContainer,{style:{display:"inline"},to:"/user/create_session",children:Object(s.jsx)(z.a.Link,{style:{display:"inline"},children:"Create Session"})}),Object(s.jsx)(R.LinkContainer,{style:{display:"inline"},to:"/user/".concat(r,"/chat"),children:Object(s.jsx)(z.a.Link,{style:{display:"inline"},children:"Chat"})}),Object(s.jsxs)(J.a.Text,{style:{display:"inline"},children:["Signed in as:",Object(s.jsx)(R.LinkContainer,{style:{display:"inline"},to:"/user/".concat(r),children:Object(s.jsx)(z.a.Link,{style:{display:"inline"},children:r})})]}),Object(s.jsx)(j.Link,{to:"/",style:{display:"inline"},onClick:function(e){e.preventDefault(),localStorage.clear(),l.push("/"),i(void 0)},children:Object(s.jsx)(z.a.Link,{style:{display:"inline"},children:"Logout"})})]}):Object(s.jsxs)("div",{children:[Object(s.jsx)(R.LinkContainer,{style:{display:"inline"},to:"/sign_in",children:Object(s.jsx)(z.a.Link,{children:"Login"})}),Object(s.jsx)(R.LinkContainer,{style:{display:"inline"},to:"/sign_up",children:Object(s.jsx)(z.a.Link,{children:"Sign Up"})})]})})})]})},V=n(37),Q=n.n(V),W=function(e){e.mode;var t=N(),n=Object(a.useState)({tutor_confirmed:e.session.tutor_confirmed,student_confirmed:e.session.student_confirmed}),c=Object(h.a)(n,2),r=c[0],i=c[1];t.username!=e.session.tutor.username||r.tutor_confirmed?t.username!=e.session.student.username||r.student_confirmed||console.log("S"):console.log("T");return"card"===e.mode?Object(s.jsx)("div",{className:"center",children:Object(s.jsx)(w.a,{className:"card session",children:Object(s.jsxs)(w.a.Body,{children:[Object(s.jsxs)(w.a.Title,{className:"card-title",children:[e.session.subject," Session with Student @",e.session.student.username]}),Object(s.jsxs)(w.a.Text,{children:[Object(s.jsxs)("span",{id:"tutor",children:["Tutor: @",e.session.tutor.username]}),Object(s.jsxs)("p",{id:"date",children:[S(e.session.date.$date)," to ",Object(s.jsx)("span",{id:"end_time",children:k(e.session.end_time.$date)})]}),Object(s.jsxs)("p",{children:["Confirmation Status: ",r.tutor_confirmed&&r.student_confirmed?"Confirmed":"Not Confirmed"," "]}),(t.username==e.session.tutor.username&&!r.tutor_confirmed||t.username==e.session.student.username&&!r.student_confirmed)&&Object(s.jsx)("a",{className:"delete-link",onClick:function(){var n={};t.username==e.session.tutor.username?n.tutor_confirmed=!0:t.username==e.session.student.username&&(n.student_confirmed=!0),fe.post("/user/sessions/".concat(e.session._id.$oid,"/edit"),n).then((function(e){i({tutor_confirmed:e.data.tutor_confirmed,student_confirmed:e.data.student_confirmed})})).catch((function(e){console.log(e)}))},children:"Confirm"})]}),Object(s.jsx)(j.Link,{to:{pathname:"/user/sessions/".concat(e.session._id.$oid,"/edit"),state:{session:e.session}},children:"Edit"})]})})}):Object(s.jsxs)("tr",{children:[Object(s.jsx)("td",{children:e.session.student.username}),Object(s.jsx)("td",{children:e.session.tutor.username}),Object(s.jsx)("td",{children:e.session.subject}),Object(s.jsx)("td",{children:S(e.session.date.$date)}),Object(s.jsx)("td",{children:k(e.session.end_time.$date)})]})},X=function(e){return Object(s.jsxs)(O.a,{className:"form-comp",children:[Object(s.jsxs)(O.a.Group,{children:[Object(s.jsx)(O.a.Label,{children:"Tutor Filter"}),Object(s.jsx)(U.a,{className:"search-input short",type:"text",name:"setTutorFilter",onChange:function(t){e.setFilters(Object(L.a)(Object(L.a)({},e.filters),{},{tutorFilter:t.target.value}))}})]}),Object(s.jsxs)(O.a.Group,{children:[Object(s.jsx)(O.a.Label,{children:"Student Filter"}),Object(s.jsx)(U.a,{className:"search-input short",type:"text",name:"setDateFilter",onChange:function(t){e.setFilters(Object(L.a)(Object(L.a)({},e.filters),{},{studentFilter:t.target.value}))}})]}),Object(s.jsxs)("div",{className:"flex-form",children:[Object(s.jsxs)(O.a.Group,{children:[Object(s.jsx)(O.a.Label,{children:"Date Filter"}),Object(s.jsx)(x.a,{className:"calendar",format:"M/D/YYYY",name:"setStartDateFilter",id:"date",onDayChange:function(t,n){var s=n.selected?void 0:t;e.setFilters(Object(L.a)(Object(L.a)({},e.filters),{},{startDateFilter:s}))},value:e.filters.startDateFilter})]}),e.filters.startDateFilter&&Object(s.jsx)("div",{children:Object(s.jsxs)(O.a.Group,{children:[Object(s.jsx)(O.a.Label,{children:"Start Time Filter"}),Object(s.jsx)(g.a,{name:"setTimePicker",id:"end_time",onChange:function(t){e.setFilters(Object(L.a)(Object(L.a)({},e.filters),{},{startTimeFilter:t}))},value:e.filters.startTimeFilter,disableClock:!0}),Object(s.jsx)(O.a.Label,{children:"End Time Filter"}),Object(s.jsx)(g.a,{name:"setTimePicker",id:"end_time",minTime:e.filters.startTimeFilter,value:e.filters.endTimeFilter,onChange:function(t){e.setFilters(Object(L.a)(Object(L.a)({},e.filters),{},{endTimeFilter:t}))},disableClock:!0})]})}),Object(s.jsx)(F,{onSelect:function(t){e.setFilters(Object(L.a)(Object(L.a)({},e.filters),{},{sessionSubjectFilter:t}))},subject:e.filters.sessionSubjectFilter})]})]})},Z=function(e){var t=Object(d.m)().username,n=e.perPage?e.perPage:1,c=Object(a.useState)({raw_sessions:[],displayed_sessions:[],filtered:[]}),r=Object(h.a)(c,2),i=r[0],l=r[1],o=Object(a.useState)(0),u=Object(h.a)(o,2),j=u[0],b=u[1],O=Object(a.useState)({tutorFilter:"",studentFilter:"",sessionSubjectFilter:"",startDateFilter:null,startTimeFilter:null,endTimeFilter:null}),m=Object(h.a)(O,2),p=m[0],x=m[1],f=Math.ceil(i.filtered.length)/n,g=function(e,t){var n=e.getMonth()<10?"0"+(e.getMonth()+1):e.getMonth()+1,s=e.getDate()<10?"0"+e.getDate():e.getDate(),a=e.getFullYear()+"-"+n+"-"+s;return new Date(a+("T"+t+":00"))};Object(a.useEffect)((function(){var e=i.raw_sessions.filter((function(e){var t=!0;if(t=p.tutorFilter?!!e.tutor.username.includes(p.tutorFilter)&&t:t,t=p.studentFilter?!!e.student.username.includes(p.studentFilter)&&t:t,p.startDateFilter){var n=new Date(e.date.$date),s=p.startDateFilter.getDate()==n.getDate()&&p.startDateFilter.getFullYear()==n.getFullYear()&&p.startDateFilter.getMonth()==n.getMonth();if(t=!!s&&t,p.startTimeFilter){var a=g(p.startDateFilter,p.startTimeFilter);t=!(!s||a.getHours()!=n.getHours()||a.getMinutes()!=n.getMinutes())&&t}if(p.endTimeFilter){var c=g(p.startDateFilter,p.endTimeFilter),r=new Date(e.end_time.$date);t=!(!s||c.getHours()!=r.getHours()||c.getMinutes()!=r.getMinutes())&&t}}return t=p.sessionSubjectFilter?p.sessionSubjectFilter==e.subject&&t:t}));l(Object(L.a)(Object(L.a)({},i),{},{displayed_sessions:n>=e.length?e.slice(j,e.length):e.slice(j,j+n),filtered:e}))}),[p.studentFilter,p.tutorFilter,p.startDateFilter,p.startTimeFilter,p.endTimeFilter,p.sessionSubjectFilter]),Object(a.useEffect)((function(){var e={xhrFields:{withCredentials:!0},crossDomain:!0,headers:{"Content-Type":"application/json"}};t?fe.get("http://127.0.0.1:5000/user/".concat(t,"/sessions"),e).then((function(e){console.log(e.data),l({raw_sessions:e.data,displayed_sessions:e.data.slice(0,n),filtered:e.data})})).catch((function(e){console.log(e)})):fe.get("http://127.0.0.1:5000/sessions",e).then((function(e){l({raw_sessions:e.data,displayed_sessions:e.data.slice(0,n),filtered:e.data})})).catch((function(e){console.log(e)}))}),[]),Object(a.useEffect)((function(){l(Object(L.a)(Object(L.a)({},i),{},{displayed_sessions:j+n>=i.filtered.length?i.filtered.slice(j,i.filtered.length):i.filtered.slice(j,j+n)}))}),[j]);var v=i.displayed_sessions.map((function(e){return Object(s.jsx)(W,{session:e,mode:t?"card":"listing"},e._id.$oid)}));return Object(s.jsxs)("div",{children:[Object(s.jsxs)("div",{children:[!t&&Object(s.jsx)(X,{sessions:i.raw_sessions,filters:p,setFilters:x}),0!==v.length?t?v:Object(s.jsxs)("table",{children:[Object(s.jsx)("thead",{children:Object(s.jsxs)("tr",{children:[Object(s.jsx)("th",{children:"Student"}),Object(s.jsx)("th",{children:"Tutor"}),Object(s.jsx)("th",{children:"Subject"}),Object(s.jsx)("th",{children:"Start Time"}),Object(s.jsx)("th",{children:"End Time"})]})}),Object(s.jsx)("tbody",{children:v})]}):Object(s.jsx)("h3",{children:"No sessions scheduled"})]}),Object(s.jsx)(M.a,{pageCount:f,pageRangeDisplayed:5,marginPagesDisplayed:5,onPageChange:function(e){var t=e.selected;b(Math.ceil(t*n))},containerClassName:"pagination",subContainerClassName:"pages pagination",activeClassName:"active",previousLabel:"Previous",nextLabel:"Next",breakLabel:"..."})]})},ee=function(){var e=Object(d.m)().username,t=Object(a.useState)(""),n=Object(h.a)(t,2),c=n[0],r=n[1],i=Object(a.useState)(!0),l=Object(h.a)(i,2),o=l[0],u=l[1],b=N();Object(a.useEffect)((function(){fe.get("/user/".concat(e),{xhrFields:{withCredentials:!0},crossDomain:!0,headers:{"Content-Type":"application/json"}}).then((function(e){var t=e.data.availability.map((function(e){var t=e.$date;return new Date(t)}));e.data.availability=t,r(e.data)})).then((function(){u(!1)}))}),[]);return Object(s.jsx)("div",{children:Object(s.jsxs)("div",{children:[o&&Object(s.jsx)(Y.a,{type:"spin",color:"white",height:"10%",width:"10%",className:"loading_spinner"}),Object(s.jsx)("h1",{children:c.full_name}),c.profile_picture?Object(s.jsx)("img",{className:"profile_picture",src:"http://localhost:5000/".concat(c.profile_picture),onError:function(e){e.preventDefault(),console.log(e.target),e.target.src="http://localhost:5000/profile_pictures/placeholder.jpg"},alt:"Profile Picture"}):Object(s.jsx)("img",{className:"profile_picture",src:"http://localhost:5000/profile_pictures/placeholder.jpg"}),Object(s.jsxs)("h2",{className:"subtitle",children:["@",e]}),Object(s.jsx)("p",{children:e!=b.username&&Object(s.jsx)(j.Link,{to:{pathname:"/user/".concat(b.username,"/chat")},children:"Chat"})}),(e==b.username||b.rls.includes("admin"))&&Object(s.jsx)(j.Link,{to:{pathname:"/user/".concat(e,"/edit"),state:{user:Object(L.a)({},c)}},children:"Edit"}),Object(s.jsx)("div",{className:"about-div",children:Object(s.jsx)("p",{className:"bio",children:c.biography})}),Object(s.jsx)("hr",{}),b&&e==b.username||b.rls.includes("admin")?Object(s.jsxs)("div",{className:"profile-items",children:[Object(s.jsxs)("div",{className:"calendar-container",children:[Object(s.jsx)("h3",{children:"Availability"}),Object(s.jsx)(Q.a,{className:"calendar",format:"MM/DD/YYYY",selectedDays:c.availability,name:"availability"})]}),Object(s.jsx)("div",{className:"user_sessions",children:e==b.username||b.rls.includes("admin")?Object(s.jsxs)("div",{children:[Object(s.jsx)("h3",{children:"Sessions"}),Object(s.jsx)(Z,{})]}):""})]}):Object(s.jsxs)("div",{children:[Object(s.jsx)("h3",{children:"Availability"}),Object(s.jsx)(Q.a,{className:"calendar",format:"MM/DD/YYYY",selectedDays:c.availability,name:"availability"})]})]})})},te=function(){var e=Object(a.useState)([]),t=Object(h.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)([]),i=Object(h.a)(r,2),l=i[0],o=i[1],j=Object(a.useState)(""),d=Object(h.a)(j,2),p=d[0],x=d[1],f=Object(a.useState)(!1),g=Object(h.a)(f,2),v=g[0],y=g[1],C=Object(a.useState)([]),_=Object(h.a)(C,2),S=_[0],k=_[1],N=Object(a.useState)([]),F=Object(h.a)(N,2),D=F[0],L=F[1],w=function(e){x(e.target.value)},T=function(e){var t=!1;p||(t=!0,o([].concat(Object(b.a)(t),["Role required."]))),e.target.email.value||(t=!0,o([].concat(Object(b.a)(t),["Email required."]))),e.target.full_name.value||o([].concat(Object(b.a)(t),["Full name required."])),e.target.username.value||o([].concat(Object(b.a)(t),["Username required."])),e.target.us_phone_number.value||o([].concat(Object(b.a)(t),["Phone number required."]))},I=function(e){return e?function(e){D.includes(e.target.value)?(L(D.filter((function(t){return t!=e.target.value}))),console.log(D)):(L([].concat(Object(b.a)(D),[e.target.value])),console.log(D))}:function(e){S.includes(e.target.value)?(k(S.filter((function(t){return t!=e.target.value}))),console.log(S)):(k([].concat(Object(b.a)(S),[e.target.value])),console.log(S))}},M=function(e){var t=e?"problem":"best";return Object(s.jsxs)("div",{children:[Object(s.jsx)(O.a.Group,{controlId:"math ".concat(t),children:Object(s.jsx)(O.a.Check,{type:"checkbox",value:"Math",label:"Math",onChange:I(e)})}),Object(s.jsx)(O.a.Group,{controlId:"physics ".concat(t),children:Object(s.jsx)(O.a.Check,{type:"checkbox",value:"Physics",label:"Physics",onChange:I(e)})}),Object(s.jsx)(O.a.Group,{controlId:"chemistry ".concat(t),children:Object(s.jsx)(O.a.Check,{type:"checkbox",value:"Chemistry",label:"Chemistry",onChange:I(e)})}),Object(s.jsx)(O.a.Group,{controlId:"biology ".concat(t),children:Object(s.jsx)(O.a.Check,{type:"checkbox",value:"Biology",label:"Biology",onChange:I(e)})}),Object(s.jsx)(O.a.Group,{controlId:"english ".concat(t),children:Object(s.jsx)(O.a.Check,{type:"checkbox",value:"English",label:"English",onChange:I(e)})}),Object(s.jsx)(O.a.Group,{controlId:"history ".concat(t),children:Object(s.jsx)(O.a.Check,{type:"checkbox",value:"History",label:"History",onChange:I(e)})}),Object(s.jsx)(O.a.Group,{controlId:"compsci ".concat(t),children:Object(s.jsx)(O.a.Check,{type:"checkbox",value:"Computer Science",label:"Computer Science",onChange:I(e)})})]})};return Object(s.jsxs)("div",{className:"form-comp",children:[Object(s.jsx)("h1",{children:"Sign Up"}),l&&Object(s.jsx)("span",{className:"form-error",children:l}),v&&0===l.length?Object(s.jsx)("span",{className:"form-text",children:"Please check your email to finish activating your account."}):null,Object(s.jsxs)(O.a,{onSubmit:function(e){if(e.preventDefault(),T(e),0===l.length){var t=e.target.email.value,s=e.target.full_name.value,a=e.target.username.value,c=e.target.password.value,r=e.target.biography?e.target.biography.value:"",i=e.target.us_phone_number.value,o=e.target.meeting_link?e.target.meeting_link.value:" ",j=e.target.profile_picture.files[0],d=new FormData;d.append("email",t),d.append("full_name",s),d.append("password",c),d.append("us_phone_number",i),d.append("profile_picture",j),d.append("biography",r),d.append("username",a),d.append("availability",n.map((function(e){return console.log(e.getMonth()+1+"/"+e.getDate()+"/"+e.getFullYear()),e.getMonth()+1+"/"+e.getDate()+"/"+e.getFullYear()}))),p.includes("tutor")&&(d.append("meeting_link",o),d.append("tutor_subjects",S)),p.includes("student")&&d.append("problem_subjects",D),y(!0),u.a.post("http://127.0.0.1:5000/user/sign_up",d).then((function(e){console.log(e)})).catch((function(e){console.log(e)}))}},children:[Object(s.jsxs)(O.a.Group,{controlId:"email",children:[Object(s.jsx)(O.a.Label,{children:"Email address"}),Object(s.jsx)(O.a.Control,{name:"email",type:"email",required:!0})]}),Object(s.jsxs)(O.a.Group,{controlId:"full_name",children:[Object(s.jsx)(O.a.Label,{children:"Full Name"}),Object(s.jsx)(O.a.Control,{name:"full_name",type:"text",required:!0})]}),Object(s.jsxs)(O.a.Group,{controlId:"username",children:[Object(s.jsx)(O.a.Label,{children:"Username"}),Object(s.jsx)(O.a.Control,{name:"username",type:"text",required:!0})]}),Object(s.jsxs)(O.a.Group,{controlId:"password",children:[Object(s.jsx)(O.a.Label,{children:"Password"}),Object(s.jsx)(O.a.Control,{name:"password",type:"password",required:!0})]}),Object(s.jsxs)(O.a.Group,{controlId:"us_phone_number",children:[Object(s.jsx)(O.a.Label,{children:"Phone Number"}),Object(s.jsx)(O.a.Control,{name:"us_phone_number",type:"tel",pattern:"[0-9]{3}-[0-9]{3}-[0-9]{4}",required:!0})]}),Object(s.jsxs)(O.a.Group,{controlId:"biography",children:[Object(s.jsx)(O.a.Label,{children:"Tell us about yourself!"}),Object(s.jsx)(O.a.Control,{name:"biography",as:"textarea",rows:3})]}),function(){var e=[],t=Object(s.jsx)("div",{children:Object(s.jsxs)(O.a.Group,{controlId:"conditional",children:[Object(s.jsxs)(O.a.Group,{controlId:"meeting_link",children:[Object(s.jsx)(O.a.Label,{children:"*Meeting Link"}),Object(s.jsx)(O.a.Control,{type:"text"})]}),Object(s.jsxs)(O.a.Group,{controlId:"subjects",children:[Object(s.jsx)(O.a.Label,{children:"Best Subjects"}),M(!1)]})]})}),n=Object(s.jsxs)(O.a.Group,{controlId:"problem_subjects",children:[Object(s.jsx)(O.a.Label,{children:"Problem Subjects"}),M(!0)]});return p.includes("tutor")&&e.push(t),p.includes("student")&&e.push(n),e}(),Object(s.jsxs)(O.a.Group,{controlId:"role",children:[Object(s.jsx)(O.a.Check,{inline:!0,value:"tutor",name:"role",checked:"tutor"===p,label:"Tutor",type:"radio",id:"tutor",onClick:w}),Object(s.jsx)(O.a.Check,{inline:!0,value:"student",name:"role",checked:"student"===p,label:"Student",type:"radio",id:"student",onClick:w}),Object(s.jsx)(O.a.Check,{inline:!0,value:"student,tutor",name:"role",checked:"student,tutor"===p,label:"Both",type:"radio",id:"both",onClick:w})]}),Object(s.jsx)(O.a.Label,{children:"Profile Picture"}),Object(s.jsx)("input",{accept:".jpg,.png,.jpeg",type:"file",name:"profile_picture"}),Object(s.jsxs)(O.a.Group,{controlId:"availability",children:[Object(s.jsx)(O.a.Label,{children:"*Availability"}),Object(s.jsx)(Q.a,{className:"calendar",disabledDays:{before:new Date},format:"MM/DD/YYYY",name:"availability",onDayClick:function(e,t){var s=t.selected,a=Object(b.a)(n);if(s){var r=a.findIndex((function(t){return V.DateUtils.isSameDay(t,e)}));a.splice(r,1),c(a)}else c([].concat(Object(b.a)(n),[e]))},selectedDays:n})]}),Object(s.jsx)(m.a,{variant:"primary",type:"submit",children:"Submit"})]})]})},ne=n(59),se=function(e){var t=Object(d.m)().username,n=N(),c=Object(d.k)(),r=Object(a.useState)([]),i=Object(h.a)(r,2),l=i[0],o=i[1],u=Object(a.useState)({}),j=Object(h.a)(u,2),p=j[0],f=j[1];Object(a.useEffect)((function(){e&&e.location&&e.location.state.user?f(e.location.state.user):fe.get("/user/".concat(t)).then((function(e){f(e.data)}))}),[]);var g=function(e){var t=Object(L.a)(Object(L.a)({},p),{},Object(ne.a)({},e.target.id,e.target.value));f(t)};return Object(s.jsxs)("div",{children:[Object(s.jsx)("h1",{children:"Edit"}),Object(s.jsxs)(O.a,{className:"form-comp",onSubmit:function(e){e.preventDefault();var s,a="";0!==l.length&&(s=p.availability,console.log(s),a=s.map((function(e){return e.getMonth()+1+"/"+e.getDate()+"/"+e.getFullYear()})));var r={email:p.email,full_name:p.full_name,username:p.username,biography:p.biography,roles:p.roles,availability:a,us_phone_number:p.us_phone_number};fe.post("http://127.0.0.1:5000/user/".concat(t,"/edit"),r,{xhrFields:{withCredentials:!0},crossDomain:!0,headers:{"Content-Type":"application/json"}}).then((function(e){n.username==t&&localStorage.setItem("token",e.data.access_token),c.push("/"),window.location.reload(!0)})).catch((function(e){console.log(e)}))},children:[Object(s.jsxs)(O.a.Group,{controlId:"email",children:[Object(s.jsx)(O.a.Label,{children:"Email address"}),Object(s.jsx)(O.a.Control,{type:"email",value:p.email||" ",onChange:g})]}),Object(s.jsxs)(O.a.Group,{controlId:"username",children:[Object(s.jsx)(O.a.Label,{children:"Username"}),Object(s.jsx)(O.a.Control,{type:"text",value:p.username||" ",onChange:g})]}),Object(s.jsxs)(O.a.Group,{controlId:"us_phone_number",children:[Object(s.jsx)(O.a.Label,{children:"Phone Number"}),Object(s.jsx)(O.a.Control,{type:"tel",pattern:"[0-9]{3}-[0-9]{3}-[0-9]{4}",value:p.us_phone_number||"",onChange:g})]}),Object(s.jsxs)(O.a.Group,{controlId:"biography",children:[Object(s.jsx)(O.a.Label,{children:"Tell us about yourself!"}),Object(s.jsx)(O.a.Control,{as:"textarea",rows:3,value:p.biography||" ",onChange:g})]}),Object(s.jsxs)(O.a.Group,{controlId:"role",children:[Object(s.jsx)(O.a.Check,{inline:!0,value:"tutor",name:"roles",label:"Tutor",type:"radio",id:"roles",onClick:g}),Object(s.jsx)(O.a.Check,{inline:!0,value:"student",name:"role",label:"Student",type:"radio",id:"roles",onClick:g}),Object(s.jsx)(O.a.Check,{inline:!0,value:"student,tutor",name:"role",label:"Both",type:"radio",id:"both"})]}),Object(s.jsxs)(O.a.Group,{controlId:"availability",children:[Object(s.jsx)(O.a.Label,{children:"Availability"}),Object(s.jsx)(x.a,{className:"calendar",format:"MM/DD/YYYY",name:"availability",onDayClick:function(e,t){if(t.selected){var n=l.findIndex((function(t){return V.DateUtils.isSameDay(t,e)}));l.splice(n,1),o(l)}else o([].concat(Object(b.a)(l),[e]))},selectedDays:l})]}),Object(s.jsx)(O.a.Group,{children:Object(s.jsx)("a",{className:"delete-link",onClick:function(){c.push("/"),fe.delete("http://127.0.0.1:5000/user/".concat(t,"/edit")).catch((function(e){console.log(e)}))},children:"Delete"})}),Object(s.jsx)(O.a.Group,{children:Object(s.jsxs)("span",{children:["Forgot password? Click",Object(s.jsx)("a",{href:"/reset_password",children:" Here"})]})}),Object(s.jsx)(m.a,{variant:"primary",type:"submit",children:"Submit"})]})]})},ae=function(e){var t=Object(d.k)(),n=Object(a.useState)(""),c=Object(h.a)(n,2),r=c[0],i=c[1],l=Object(a.useState)(""),o=Object(h.a)(l,2),u=o[0],j=o[1],b=Object(a.useState)(e.location.state.session),p=Object(h.a)(b,2),f=p[0],v=p[1],y=Object(a.useState)(""),C=Object(h.a)(y,2),_=C[0],S=C[1],k=function(e,t){var n=0==parseInt(t.substring(0,1))?parseInt(t.substring(1,2)):parseInt(t.substring(0,2)),s=t.substring(2);return t=(n>12?n-12:n<10?"0"+n:n)+s+" "+(n<12?"AM":"PM"),e.getMonth()+1+"/"+e.getDate()+"/"+e.getFullYear()+" "+t};return Object(s.jsx)("div",{className:"form-comp-container",children:Object(s.jsxs)("div",{className:"form-comp",children:[Object(s.jsx)("h1",{children:"Edit Session"}),Object(s.jsx)("span",{className:"errors",children:_}),Object(s.jsxs)(O.a,{onSubmit:function(e){if(e.preventDefault(),S(!u||!r||u>r?"Invalid time":""),!_){var n=k(f.date,r),s=k(f.date,u),a=Object(L.a)(Object(L.a)({},f),{},{end_time:n,date:s});fe.post("/user/sessions/".concat(f._id.$oid,"/edit"),Object(L.a)(Object(L.a)({},a),{},{tutor_confirmed:!1,student_confirmed:!1}),{xhrFields:{withCredentials:!0},crossDomain:!0,headers:{"Content-Type":"application/json"}}).then((function(){t.push("/")})).catch((function(e){console.log(e)}))}},children:[Object(s.jsx)(F,{onSelect:function(e){v(Object(L.a)(Object(L.a)({},f),{},{subject:e}))},subject:f.subject}),Object(s.jsxs)(O.a.Group,{controlId:"tutor",children:[Object(s.jsx)(O.a.Label,{children:"Tutor"}),Object(s.jsx)(O.a.Control,{type:"text",value:f.tutor.username})]}),Object(s.jsxs)(O.a.Group,{controlId:"student",children:[Object(s.jsx)(O.a.Label,{children:"Student"}),Object(s.jsx)(O.a.Control,{type:"text",value:f.student.username})]}),Object(s.jsxs)(O.a.Group,{children:[Object(s.jsx)(O.a.Label,{children:"Date"}),Object(s.jsx)(x.a,{className:"calendar",format:"M/D/YYYY",name:"date",id:"date",onDayClick:function(e,t){var n=t.selected?void 0:e,s=Object(L.a)(Object(L.a)({},f),{},{date:n});v(s)},selectedDays:new Date(f.date)})]}),Object(s.jsxs)(O.a.Group,{children:[Object(s.jsx)(O.a.Label,{className:"block-label",children:"Start Time"}),Object(s.jsx)(g.a,{name:"time",id:"time",disableClock:!0,onChange:function(e){j(e)},value:u})]}),Object(s.jsxs)(O.a.Group,{children:[Object(s.jsx)(O.a.Label,{className:"block-label",children:"End Time"}),Object(s.jsx)(g.a,{name:"end_time",id:"end_time",disableClock:!0,onChange:function(e){i(e)},value:r})]}),Object(s.jsx)(m.a,{variant:"primary",type:"submit",children:"Submit"})]})]})})},ce=n(222),re=function(){var e=N(),t=Object(d.m)().username,n=Object(a.useState)({displayed:[],messages:[]}),c=Object(h.a)(n,2),r=c[0],i=c[1],l=Object(a.useState)([]),o=Object(h.a)(l,2),u=o[0],j=o[1],p=Object(a.useState)(void 0),x=Object(h.a)(p,2),f=x[0],g=x[1],y=Object(a.useState)(!1),C=Object(h.a)(y,2),_=C[0],k=C[1],F=Object(a.useState)(0),D=Object(h.a)(F,2),w=D[0],T=D[1],I=30,G=Math.ceil(r.messages.length)/I;Object(a.useEffect)((function(){console.log(r.messages,r.messages.slice(w,w+I)),i(Object(L.a)(Object(L.a)({},r),{},{displayed:w+I>=r.messages.length?r.messages.slice(w,r.messages.length):r.messages.slice(w,w+I)}))}),[w]);var P={xhrFields:{withCredentials:!0},crossDomain:!0,headers:{"Content-Type":"application/json"}};Object(a.useEffect)((function(){e.rls.includes("student")&&e.rls.includes("tutor")?fe.get("http://127.0.0.1:5000/user").then((function(e){return e.data.filter((function(e){return e.username!=t}))})).then((function(e){j([].concat(Object(b.a)(u),Object(b.a)(e)))})).catch((function(e){console.log(e)})):e.rls.includes("tutor")?fe.get("http://127.0.0.1:5000/user/students").then((function(e){return e.data.filter((function(e){return e.username!=t}))})).then((function(e){j([].concat(Object(b.a)(u),Object(b.a)(e)))})).catch((function(e){console.log(e)})):e.rls.includes("student")&&fe.get("http://127.0.0.1:5000/user/tutors").then((function(e){return e.data.filter((function(e){return e.username!=t}))})).then((function(e){j([].concat(Object(b.a)(u),Object(b.a)(e)))})).catch((function(e){console.log(e)}))}),[]),Object(a.useEffect)((function(){f&&void 0!=f.username&&new Promise((function(e,t){e(k(!0)),T(0)})).then((function(){return fe.get("http://127.0.0.1:5000/user/".concat(t,"/chat/").concat(f._id.$oid),P)})).then((function(e){e.data&&i({displayed:w+I>=e.data.length?e.data.slice(w,e.data.length):e.data.slice(w,w+I),messages:Object(b.a)(e.data)})})).then((function(){k(!1)})).catch((function(e){console.log(e)}))}),[f]);var E=r.displayed.map((function(e){var t=f._id.$oid==e.sender.$oid?"recieved":"sent",n=new Date(e.timestamp.$date),a=S(n);return Object(s.jsxs)("div",{className:"message ".concat(t),children:[Object(s.jsx)("span",{className:"message_text",children:e.body}),Object(s.jsx)("span",{className:"message_time",children:a})]})}));return ve.on("msg",(function(e){i(Object(L.a)(Object(L.a)({},r),{},{messages:[].concat(Object(b.a)(r.messages),[e])}))})),Object(s.jsxs)(O.a,{onSubmit:function(e){e.preventDefault();var n={recipient:f._id.$oid,body:e.target.message.value,sender:Object(ce.a)(localStorage.getItem("token")).id};fe.post("http://127.0.0.1:5000/user/".concat(t,"/chat/").concat(f._id.$oid),n,{headers:{"Content-Type":"application/json"}}).then((function(e){var t=[].concat(Object(b.a)(r.messages),[e.data]);i({displayed:w+I>=t.length?t.slice(w,t.length):t.slice(w,w+I),messages:t})})).catch((function(e){console.log(e)}))},className:"form-comp",children:[f?Object(s.jsxs)("div",{children:[Object(s.jsx)("h2",{class:"username",children:f.username}),_&&Object(s.jsx)(Y.a,{type:"spin",color:"white",height:"10%",width:"10%",className:"loading_spinner"}),Object(s.jsx)("div",{children:0!==E.length?Object(s.jsxs)("div",{className:"message_list",children:[E,Object(s.jsx)(M.a,{pageCount:G,pageRangeDisplayed:5,marginPagesDisplayed:5,onPageChange:function(e){var t=e.selected,n=Math.ceil(t*I);T(n)},containerClassName:"pagination",subContainerClassName:"pages pagination",activeClassName:"active",previousLabel:"Previous",nextLabel:"Next",breakLabel:"..."})]}):Object(s.jsx)("span",{class:"flavor-text",children:"Start a conversation"})})]}):Object(s.jsxs)("div",{children:[" ",Object(s.jsx)("h1",{children:"Chat"}),Object(s.jsx)("span",{class:"flavor-text",children:"Select someone to chat with."})]}),Object(s.jsxs)("div",{className:"message-form-input",children:[Object(s.jsx)("div",{children:Object(s.jsx)(v.a,{menuPortalTarget:document.querySelector("body"),maxMenuHeight:220,classNamePrefix:"react-select",className:"select center",onChange:function(e){g(e==f?void 0:e),i({displayed:[],messages:[]})},options:u,getOptionLabel:function(e){return e.username},getOptionValue:function(e){return e._id}})}),f&&Object(s.jsxs)("div",{children:[Object(s.jsx)(O.a.Group,{controlId:"message",children:Object(s.jsx)(O.a.Control,{type:"text",placeholder:"Message"})}),Object(s.jsx)(m.a,{type:"submit",children:"Send"})]})]})]})},ie=function(){var e=Object(d.l)(),t=Object(d.k)(),n=e.search.substr(7);console.log(n);var c={crossDomain:!0,headers:{Authorization:" Bearer ".concat(n)}};return Object(a.useEffect)((function(){u.a.get("http://127.0.0.1:5000/finalize",c).then((function(e){setTimeout((function(){localStorage.clear(),localStorage.setItem("token",e.data.access_token),t.push("/"),window.location.reload(!0)}),2e3)})).catch((function(e){console.log(n),console.log(e)}))}),[]),Object(s.jsxs)("div",{children:[Object(s.jsx)("h1",{children:"Successful registration"}),Object(s.jsx)("p",{children:"Redirecting home..."})]})},le=function(){var e=Object(d.k)(),t=Object(d.l)().search.substr(7),n=Object(a.useState)(!1),c=Object(h.a)(n,2),r=c[0],i=c[1];return Object(s.jsxs)("div",{children:[Object(s.jsx)("h1",{children:"Reset Your Password"}),t?Object(s.jsxs)(O.a,{onSubmit:function(n){n.preventDefault();var s={crossDomain:!0,headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)}};u.a.post("http://127.0.0.1:5000/reset_password",{password:n.target.new_pass.value,confirmNewPassword:n.target.confirm_new_pass.value},s).then((function(t){e.push("/")})).catch((function(e){console.log(e)}))},children:[Object(s.jsxs)(O.a.Group,{controlId:"new_pass",children:[Object(s.jsx)(O.a.Label,{children:"New password"}),Object(s.jsx)(O.a.Control,{})]}),Object(s.jsxs)(O.a.Group,{controlId:"confirm_new_pass",children:[Object(s.jsx)(O.a.Label,{children:"Confirm new password"}),Object(s.jsx)(O.a.Control,{})]}),Object(s.jsx)(m.a,{type:"submit",children:"Submit"})]}):Object(s.jsxs)(O.a,{onSubmit:function(e){e.preventDefault();var t={email:e.target.email.value};u.a.post("http://127.0.0.1:5000/send_password_email",t,{crossDomain:!0,headers:{"Content-Type":"application/json"}}).then((function(e){i(!0)})).catch((function(e){console.log(e)}))},children:[r&&Object(s.jsx)("span",{className:"flavor_text",children:"Password Reset Email Sent"}),Object(s.jsxs)(O.a.Group,{controlId:"email",children:[Object(s.jsx)(O.a.Label,{children:"Email"}),Object(s.jsx)(O.a.Control,{})]}),Object(s.jsx)(m.a,{type:"submit",children:"Send"})]})]})},oe=n(132),ue=n.n(oe),je=n(223),de=function(e){var t=Object(a.useState)([]),n=Object(h.a)(t,2),c=n[0],r=n[1],i=function(){var e=Object(je.a)(ue.a.mark((function e(t){var n;return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fe.get("/user/".concat(t,"/tutoring_history?hours=true"));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){e.username?i(e.username).then((function(e){var t=[];for(var n in e)t.push(Object(s.jsxs)("div",{children:[n," : ",e[n]]}));return t})).then((function(e){r(e)})):console.log("NO USER FOUND")}),[]),Object(s.jsxs)("tr",{className:"userListing",children:[Object(s.jsx)("td",{children:e.full_name}),Object(s.jsx)("td",{children:Object(s.jsx)(j.Link,{to:"/user/".concat(e.username),children:e.username})}),Object(s.jsx)("td",{children:e.email}),Object(s.jsx)("td",{children:e.us_phone_number}),Object(s.jsx)("td",{children:e.roles}),Object(s.jsx)("td",{children:e.tutor_subjects&&0!==e.tutor_subjects.length?e.tutor_subjects.join(", "):"N/A"}),Object(s.jsx)("td",{children:e.tutor_subjects&&0!==e.problem_subjects.length?e.problem_subjects:"N/A"}),Object(s.jsx)("td",{children:c})]})},be=function(){var e=Object(a.useState)({userList:[],displayed:[],filtered:[]}),t=Object(h.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)(0),i=Object(h.a)(r,2),l=i[0],o=i[1],d=Math.ceil(n.filtered.length)/10,b=Object(a.useState)("user"),m=Object(h.a)(b,2),p=m[0],x=m[1],f=function(e){x(e.target.value)};return Object(a.useEffect)((function(){c(Object(L.a)(Object(L.a)({},n),{},{displayed:l+10>=n.filtered.length?n.filtered.slice(l,n.filtered.length):n.filtered.slice(l,l+10)}))}),[l]),Object(a.useEffect)((function(){u.a.get("http://127.0.0.1:5000/user").then((function(e){return c({userList:e.data,filtered:e.data,displayed:e.data}),e.data}))}),[]),Object(s.jsxs)("div",{children:[Object(s.jsx)("h1",{children:"Admin Portal"}),Object(s.jsx)(j.Link,{to:"/admin/subjects",children:"Subjects"}),Object(s.jsx)(E.a,{children:Object(s.jsxs)(O.a.Group,{className:"radios",children:[Object(s.jsx)(O.a.Check,{inline:!0,value:"user",name:"setModeFilter",label:"User View",type:"radio",id:"mode",checked:"user"==p,onClick:f}),Object(s.jsx)(O.a.Check,{inline:!0,value:"session",name:"setModeFilter",label:"Session View",type:"radio",id:"mode",onClick:f})]})}),"user"==p&&Object(s.jsx)(q,{users:n,setUsers:c,offset:l,pageCount:d,perPage:10,mode:p,setMode:x}),"user"==p?0===n.displayed.length?Object(s.jsx)("span",{className:"flavor-text greyed_out",children:"No Matching Users"}):Object(s.jsxs)("div",{children:[Object(s.jsxs)("table",{children:[Object(s.jsxs)("thead",{children:[Object(s.jsx)("th",{children:"Full Name"}),Object(s.jsx)("th",{children:"Username"}),Object(s.jsx)("th",{children:"Email"}),Object(s.jsx)("th",{children:"Phone"}),Object(s.jsx)("th",{children:"Roles"}),Object(s.jsx)("th",{children:"Tutor's Subjects"}),Object(s.jsx)("th",{children:"Problem Subjects"}),Object(s.jsx)("th",{children:"Hours"})]}),Object(s.jsx)("tbody",{children:n.displayed.map((function(e){return Object(s.jsx)(de,{full_name:e.full_name,username:e.username,email:e.email,us_phone_number:e.us_phone_number,roles:e.roles,tutor_subjects:e.tutor_subjects,problem_subjects:e.problem_subjects},e._id.$oid)}))})]}),Object(s.jsx)(M.a,{pageCount:d,pageRangeDisplayed:5,marginPagesDisplayed:5,onPageChange:function(e){var t=e.selected,n=Math.ceil(10*t);o(n)},containerClassName:"pagination",subContainerClassName:"pages pagination",activeClassName:"active",previousLabel:"previous",nextLabel:"next",breakLabel:"..."})]}):Object(s.jsx)(Z,{perPage:5})]})},he=function(e){console.log(e.error);return Object(s.jsx)("div",{children:function(){switch(e.error){case 401:return Object(s.jsxs)("div",{children:[Object(s.jsx)("h1",{children:"401"}),Object(s.jsx)("h2",{children:"You do not have access to this page"}),Object(s.jsx)(j.Link,{to:"/",children:"Home"})]});case 404:return Object(s.jsxs)("div",{children:[Object(s.jsx)("h1",{children:"404"}),Object(s.jsx)("h2",{children:"The page was not found."}),Object(s.jsx)(j.Link,{to:"/",children:"Home"})]})}}()})},Oe=function(){var e=Object(a.useState)([]),t=Object(h.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)([]),i=Object(h.a)(r,2),l=i[0],o=i[1];return Object(a.useEffect)((function(){fe.get("http://127.0.0.1:5000/subjects").then((function(e){c(e.data)}))}),[]),Object(s.jsxs)("div",{children:[Object(s.jsx)("h1",{children:"Subjects"}),Object(s.jsx)("h3",{children:"Create Subject"}),l,Object(s.jsxs)(O.a,{className:"form-comp",onSubmit:function(e){e.preventDefault();fe.post("http://127.0.0.1:5000/subjects/new",{subject:e.target.subject.value},{xhrFields:{withCredentials:!0},crossDomain:!0,headers:{"Content-Type":"application/json"}}).then((function(t){e.target.subject.value="",o(""),c([].concat(Object(b.a)(n),[t.data]))})).catch((function(e){o("An error occurred processing your request.")}))},children:[Object(s.jsx)(O.a.Label,{children:"New Subject"}),Object(s.jsx)(U.a,{type:"text",name:"subject"}),Object(s.jsx)(m.a,{variant:"primary",type:"submit",children:"Submit"})]}),Object(s.jsx)("h3",{children:"Current Subjects"}),Object(s.jsx)("div",{className:"subjects",children:n.map((function(e){return Object(s.jsxs)("div",{className:"subject",children:[Object(s.jsx)("p",{children:e.subject}),Object(s.jsx)("a",{className:"delete-link",onClick:function(){return t=e._id.$oid,void fe.post("http://127.0.0.1:5000/subjects/delete/".concat(t)).then((function(){var e=n.filter((function(e){return e._id.$oid!==t}));c(e)})).catch((function(e){console.log(e),o("Error occurred while deleting")}));var t},children:"Delete"})]},e._id.$oid)}))})]})},me=function(){return Object(s.jsxs)(d.g,{children:[Object(s.jsx)(d.d,{path:"/admin/subjects",component:Oe}),Object(s.jsx)(d.d,{path:"/admin/portal",component:be})]})},pe=function(){var e=N();return Object(s.jsx)(j.BrowserRouter,{children:Object(s.jsxs)("div",{children:[Object(s.jsx)(K,{}),Object(s.jsxs)(d.g,{children:[Object(s.jsx)(d.d,{path:"/",component:H,exact:!0}),Object(s.jsx)(d.d,{path:"/finalize_registration",component:ie,exact:!0}),Object(s.jsx)(d.d,{exact:!0,path:"/reset_password",component:le}),Object(s.jsx)(d.d,{path:"/sign_up",component:te,exact:!0}),Object(s.jsx)(d.d,{path:"/sign_in",component:A,exact:!0}),Object(s.jsx)(d.d,{path:"/dashboard",exact:!0,children:e?Object(s.jsx)($,{}):Object(s.jsx)(he,{error:401})}),Object(s.jsx)(d.d,{path:"/user/create_session",exact:!0,children:e?Object(s.jsx)(D,{}):Object(s.jsx)(he,{error:401})}),Object(s.jsx)(d.d,{exact:!0,path:"/user/sessions/:session/edit",component:ae}),Object(s.jsx)(d.d,{exact:!0,path:"/user/:username",render:function(t){t.match;return Object(s.jsx)("div",{children:e?Object(s.jsx)(ee,{}):Object(s.jsx)(he,{error:401})})}}),Object(s.jsx)(d.d,{exact:!0,path:"/user/:username/edit",render:function(t){var n=t.match;return Object(s.jsx)("div",{children:e&&n.params.username==e.username||e.rls.includes("admin")?Object(s.jsx)(se,{}):Object(s.jsx)(he,{error:401})})}}),Object(s.jsx)(d.d,{exact:!0,path:"/user/:username/chat",render:function(t){var n=t.match;return Object(s.jsx)("div",{children:e&&n.params.username==e.username||e.rls.includes("admin")?Object(s.jsx)(re,{}):Object(s.jsx)(he,{error:401})})}}),Object(s.jsx)(d.d,{path:"/admin",render:function(t){t.match;return Object(s.jsx)("div",{children:e&&e.rls.includes("admin")?Object(s.jsx)(me,{}):Object(s.jsx)(he,{error:401})})}}),Object(s.jsx)(d.d,{children:Object(s.jsx)(he,{error:404})})]})]})})},xe=n(224),fe=u.a.create({baseURL:"http://127.0.0.1:5000"}),ge=xe.io.connect("http://127.0.0.1:5000");fe.interceptors.request.use((function(e){var t=localStorage.getItem("token");return t&&(e.headers.Authorization="Bearer "+t),e}),(function(e){return Promise.reject(e)})),i.a.render(Object(s.jsx)(c.a.StrictMode,{children:Object(s.jsx)(pe,{})}),document.getElementById("root")),l();var ve=t.default=ge}},[[433,1,2]]]);
//# sourceMappingURL=main.cf429062.chunk.js.map